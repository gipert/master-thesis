%! TEX root = ../main.tex
\chapter{The {\gerda} dataset and Monte Carlo simulations}
% {{{ THE GERDA DATA STRUCTURE
\marginnote{the\\{\gerda}\\data\\structure} The binary raw data format is defined by the different data acquisition systems. In order to optimize the analysis streaming and to provide a unique input interface for the analysis, all raw data are converted to a common standardized format. MGDO \cite{MGDO} (\textsc{Majorana} {\gerda} Data Objects) is a software library jointly developed by {\gerda} and \textsc{Majorana} \cite{majoranadem}. The core function of this software is to provide a collection of \texttt{C++} objects to encapsulate HPGe detector array event data and related analytical quantities. It also includes implementations of a number of general-purpose signal processing algorithms to support advanced detector signal analysis. The custom data objects available in the MGDO package are used as reference format to store events, waveforms, and other DAQ data (time stamps, flags). The MGDO data objects are stored as ROOT \cite{ROOT} files. The set of ROOT files produced by the conversion of raw data is named \textsc{Tier1}, and is officially distributed for the analysis.

Since the information contained in the \textsc{Tier1} set and in the raw data is expected to be equal, the conversion procedure is the optimal place where blinding can be applied. Events with an energy close to $Q_{\beta\beta}$ are not exported to \textsc{Tier1} but they remain saved in the backup of the raw data.

The software framework \textsc{Gelatio} \cite{GELATIO} contains nearly independent and customizable modules that are applied to the input \textsc{Tier1} waveforms. The results (pulse amplitude, rise time, average baseline, energy, etc.) are stored as a new ROOT file (\textsc{Tier2}). A description of the analysis modules is presented in Ref.~\cite{dataproc}. Higher level \textsc{Tier}\emph{i} files can be created that contain additional parameters evaluated from more advanced analysis (e.g.~calibrated energy spectra). The information of the same event stored in different \textsc{Tier}\emph{i} files can be accessed by means of the ROOT friendship mechanism. In principle only the \textsc{Tier1} is official and everyone should produce his own \textsc{Tier2} files depending on the actual needs. However there exist a `reference' \textsc{Tier2} produced with a standard set of \textsc{Gelatio} modules with a reasonable choice of parameters (e.g.~the width of the gaussian filter responsible for the reconstruction of the energy of an event). The same procedure applies to every \textsc{Tier}\emph{i} file.

Once the relevant quantities have been extracted from raw waveforms they have to be calibrated (e.g.~energy) and quality cuts (e.g.~for unphysical events) have to be applied. The results are stored again as a ROOT file (\textsc{Tier3}). The extraction of parameters related to the entire event (e.g.~the number of channels with a physical signal) is also performed at this level. Finally, high level quality cuts are applied in \textsc{Tier4}, such as pulse shape discrimination, muon-veto and LAr-veto.

% }}}
% {{{ QUALITY CUTS
\marginnote{quality\\cuts} There is a set of classes of events that originates from errors in the acquisition process, limitations of the hardware (e.g.~the FADC) or failures in the reconstruction flow (\textsc{Gelatio}) and has to be excluded from the analysis. There are events not related to an energy deposition, and thus consisting of a flat signal (an energy deposition in one detector triggers the sampling of the pulses from each of the 40 detectors, so it is very common to find pure-baseline signals in data), waveforms which amplitude exceeds the FADC's energy threshold (overshoot events), pile-up events, and all other unphysical events.

The main purpose for acquiring pulses from all the detectors when an energy deposition occurs anywhere is to provide the ability to detect multi-detector events. {\color{red}Si ma perch√® li togliamo?} Events that left a trace also in the water tank and/or in the upper scintillating panels and thus flagged by the muon-veto system are also discarded.

% }}}
% {{{ THE ENERGY SPECTRA
\marginnote{the\\energy\\spectra} With the cuts described above, the summed energy spectra from BEGe, enriched coaxial and natural coaxial detectors are presented in Fig.~TODO. Some prominent features can be identified. The low energy part up to 565 keV is dominated by $\beta^-$ decay of cosmogenic \ce{^{39}Ar} in all spectra. Slight differences in the spectral shape between the coaxial and BEGe type detectors result from differences in detector geometry and of the n$^+$ dead layer thickness. Between 600 and 1500 keV the spectra of the enriched detectors exhibit an enhanced continuous spectrum due to $2\nbb$ decay (see also Fig.~\ref{fig:energyspectra}). In all spectra, $\gamma$ lines from the decays of \ce{^{40}K} and \ce{^{42}K} can be identified, the spectra of the enriched coaxial detectors contain also lines from \ce{^{60}Co}, \ce{^{208}Tl}, \ce{^{214}Bi}, \ce{^{214}Pb} and \ce{^{228}Ac}. A peak-like structure appears around 5.3 MeV in the spectrum of the enriched coaxial detectors. This can be attributed to the decay of \ce{^{210}Po} on the detector p$^+$ surfaces. Further peak like structures at energies of 4.7, 5.4 and 5.9 MeV can be attributed to the $\alpha$ decays on the detector p$^+$ surface of \ce{^{226}Ra}, \ce{^{222}Rn} and \ce{^{218}Po}, respectively. 
